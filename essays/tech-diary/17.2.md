## 前端技术trick杂谈-2月

## JS语法篇

> 目前前端生态圈采用ES6/7来写代码已经成为潮流，babel则是支撑这一潮流的主要pillar。

> 关于JS语法AST解析，babel提供了stage、preset等实验性api及插件集合供开发者使用。

> 结合个人实践和babel官方文档，笔者总结了部分少用但完全你可以用于生产环境的JS语法。

### 插件preset之 babel-preset-stage-4

> 指数函数简写形式(Exponentiation operator transform)
> 包括async,trailing commas，这个提案已经由stage-3移至stage-4。

```javascript 
    let squared = 2 ** 3;// same as: Math.pow(2,3)
    let a **= 2; // same as: Math.pow(a,3)
```
> 目前babel官方暂未发布prest-stage-4

### 插件preset之 babel-preset-stage-3

> rest方式解构对象

```javascript
    // Rest properties
    let { x, y, ...z } = { x: 1, y: 2, a: 3, b: 4 };
    console.log(x); // 1
    console.log(z); // { a: 3, b: 4 }    
```
> async generator异步流控制
> 这一块在浏览器环境需要增加babel-polyfill添加regeneratorRuntime

```javascript
    (async ()=>{
        var data = await new Promise(function(resolve,reject) {
            setTimeout(()=>resolve(100),100);
        });
        console.log(data); //100
    })();
```
> [stage3插件官方链接](https://babeljs.io/docs/plugins/preset-stage-3/)

### 插件preset之 babel-preset-stage-2
> stage-2主要是class语法的提案，这块大家应该很熟悉，就不赘述了。

### 插件preset之 babel-preset-stage-1
> transform-class-constructor-call
> 它提供了将构造函数作为普通函数来使用的方案。
> 原理上是采用了new.target来引用constructor。
> 不过在babel7，这个feature将会移除，因为意义并不大。
```javascript
    class A {
        constructor(){
            this.a=1;
        }
        call constructor(){
            return 1
        }
    }
    console.log(new A()) ;// {a:1}
    console.log(A()) //1
```
